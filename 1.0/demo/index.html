<!doctype html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>treemenu的demo</title>
    <script src="http://g.tbcdn.cn/kissy/k/1.3.0/kissy-min.js" charset="utf-8"></script>
    <link rel="stylesheet" href="http://g.tbcdn.cn/kissy/k/1.3.0/css/dpl/base-min.css">
	<style>
		body{font-size:12px; padding:5px;}
		button{padding:3px 5px;}
		td{padding:3px;}
		#menu{width:300px;}
	</style>
</head>
<body>
<h2>树形菜单treemenu</h2>
<table>
    <tr>
    	<td><label><input type="checkbox" id="unique" />保持同支同级节点最多展开一个</label></td>
        <td></td>
  	</tr>
    <tr>
    	<td><label><input type="checkbox" id="anim" />启用展开收缩渐隐效果</label></td>
        <td></td>
  	</tr>
    <tr>
    	<td>默认提供样式：
            <select id="style">
                <option value="gray-dot">gray-dot</option>
                <option value="blue-dot">blue-dot</option>
                <option value="gray-line">gray-line</option>
                <option value="orange-line">orange-line</option>
                <option value="simple">simple</option>
            </select>
        </td>
        <td></td>
  	</tr>
    <tr>
    	<td><button id="unfoldAll">展开全部节点</button> <button id="foldAll">关闭全部节点</button> <button id="resetAll">重置为初始状态</button></td>
        <td><b>当前操作行为</b></td>
  	</tr>
    <tr>
        <td><div id="menu"> </div></td>
        <td id="info" style="vertical-align:top;"></td>
	</tr>
</table>

<script>
    var S = KISSY;
    if (S.Config.debug) {
        var srcPath = "../../../";
        S.config({
            packages:[
                {
                    name:"gallery",
                    path:srcPath,
                    charset:"utf-8",
                    ignorePackageNameInUri:true
                }
            ]
        });
    }

    S.use('gallery/treemenu/1.0/index, node', function (S, TreeMenu, Node) {
		var menu = {
			title:'树形菜单',
			value:'root',
			anim:false,
			unfold:true,
			unfoldAll:false,
			unique:false,
			subMenu:[
				{
					title:'测试菜单1',
					value:'value1',
					unfold:true,
					tip:'我是测试菜单1tip',
					subMenu:[
							{
								title:'测试菜单1-1',
								value:'value1-1',
								subMenu:[	{title: '测试菜单1-1-1', value:'value1-1-1'},
											{title: '测试菜单1-1-2', value:'value1-1-2'}, 
											{title: '测试菜单1-1-2', value:'value1-1-3'}]
							},
							{	
								title:'测试菜单1-2',
								value:'value1-2',
								subMenu:[	{title: '测试菜单1-2-1',
											value:'value1-2-1',
											subMenu : [{title: '测试菜单1-2-1-1', value:'value2-1-1'}, 
														{title: '测试菜单1-2-1-2', value:'value2-1-2'},
														{title: '测试菜单1-2-1-3', value:'value2-1-3'},
														{title: '测试菜单1-2-1-4', value:'value2-1-4'}]},
											{title: '测试菜单1-2-2', value:'value1-2-2'}, 
											{title: '测试菜单1-2-3', value:'value1-2-3'}]
							},
							{title:'测试菜单1-3', value:'value1-3'},
							{title:'测试菜单1-4', value:'value1-4'}
						]
				},
				{
					title:'测试菜单2',
					value:'value2',
					unfold:true,
					tip:'我是测试菜单2tip',
					subMenu:[
							{
									title:'测试菜单2-1', 
									value:'value2-1',
									subMenu:[	{title: '测试菜单2-1-1',value:'value2-1-1'},
											{title: '测试菜单2-1-2', value:'value2-1-2'}, 
											{title: '测试菜单2-1-3', value:'value2-1-3'}]
							},
							{title:'测试菜单2-2', value:'value2-2'},
							{title:'测试菜单2-3', value:'value2-3'},
							{title:'测试菜单2-4', value:'value2-4'}
						]
				},
				{title:'测试菜单3',value:'value3'},
				{title:'测试菜单4',value:'value4'}
			]
		};

		var treemMenu = new TreeMenu(menu)
	
		treemMenu.render();
		
		treemMenu.on('fold', function(evt){
			Node.one('#info').html(evt.entity.title + ' 收起' + '<br>unflod = ' + evt.entity.unfold);
		});
		
		treemMenu.on('unfold', function(evt){
			Node.one('#info').html(evt.entity.title + ' 展开' + '<br>unflod = ' + evt.entity.unfold);
		});
		
		treemMenu.on('select', function(evt){
			Node.one('#info').html(evt.entity.title + ' 被选中' + '<br>选项值为' + evt.entity.value + '<br>所在层为' + evt.entity.level);
		});
		
		Node.one('#unfoldAll').on('click', function(evt){
			treemMenu.unfoldAll();
		});
		
		Node.one('#foldAll').on('click', function(evt){
			treemMenu.foldAll();
		});
		
		Node.one('#resetAll').on('click', function(evt){
			treemMenu.resetAll();
		});
		
		Node.one('#unique').on('click', function(evt){
			menu.unique = Node.one(this)[0].checked;
			treemMenu.reload(menu);
			treemMenu.render();
		});
		
		Node.one('#anim').on('click', function(evt){
			menu.anim = Node.one(this)[0].checked;
			treemMenu.reload(menu);
			treemMenu.render();
		});
		
		Node.one('#style').on('change', function(evt){
			menu.style = Node.one(this).val();		
			treemMenu.reload(menu);
			treemMenu.render();
		});
    })
</script>
</body>
</html>